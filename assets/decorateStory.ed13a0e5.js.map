{"version":3,"file":"decorateStory.ed13a0e5.js","sources":["../../../node_modules/.pnpm/@storybook+vue3@6.5.13_26497cd6bd6d6052afb3bca99a3bbcc8/node_modules/@storybook/vue3/dist/esm/client/preview/render.js","../../../node_modules/.pnpm/@storybook+store@6.5.13_react-dom@16.14.0+react@16.14.0/node_modules/@storybook/store/dist/esm/decorators.js","../../../node_modules/.pnpm/@storybook+vue3@6.5.13_26497cd6bd6d6052afb3bca99a3bbcc8/node_modules/@storybook/vue3/dist/esm/client/preview/decorateStory.js"],"sourcesContent":["var _templateObject;\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.freeze.js\";\nimport dedent from 'ts-dedent';\nimport { createApp, h, shallowRef } from 'vue';\nexport var render = function render(props, context) {\n  var id = context.id,\n      Component = context.component;\n\n  if (!Component) {\n    throw new Error(\"Unable to render story \".concat(id, \" as the component annotation is missing from the default export\"));\n  } // TODO remove this hack\n\n\n  return h(Component, props);\n};\nexport var activeStoryComponent = shallowRef(null);\nvar root = null;\nexport var storybookApp = createApp({\n  // If an end-user calls `unmount` on the app, we need to clear our root variable\n  unmounted: function unmounted() {\n    root = null;\n  },\n  setup: function setup() {\n    return function () {\n      if (!activeStoryComponent.value) throw new Error('No Vue 3 Story available. Was it set correctly?');\n      return h(activeStoryComponent.value);\n    };\n  }\n});\nexport function renderToDOM(_ref, domElement) {\n  var title = _ref.title,\n      name = _ref.name,\n      storyFn = _ref.storyFn,\n      showMain = _ref.showMain,\n      showError = _ref.showError,\n      showException = _ref.showException;\n  storybookApp.config.errorHandler = showException;\n  var element = storyFn();\n\n  if (!element) {\n    showError({\n      title: \"Expecting a Vue component from the story: \\\"\".concat(name, \"\\\" of \\\"\").concat(title, \"\\\".\"),\n      description: dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n        Did you forget to return the Vue component from the story?\\n        Use \\\"() => ({ template: '<my-comp></my-comp>' })\\\" or \\\"() => ({ components: MyComp, template: '<my-comp></my-comp>' })\\\" when defining the story.\\n      \"])))\n    });\n    return;\n  }\n\n  showMain();\n  activeStoryComponent.value = element;\n\n  if (!root) {\n    root = storybookApp.mount(domElement);\n  }\n}","import \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.symbol.js\";\nvar _excluded = [\"componentId\", \"title\", \"kind\", \"id\", \"name\", \"story\", \"parameters\", \"initialArgs\", \"argTypes\"];\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.to-string.js\";\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nexport function decorateStory(storyFn, decorator, bindWithContext) {\n  // Bind the partially decorated storyFn so that when it is called it always knows about the story context,\n  // no matter what it is passed directly. This is because we cannot guarantee a decorator will\n  // pass the context down to the next decorated story in the chain.\n  var boundStoryFunction = bindWithContext(storyFn);\n  return function (context) {\n    return decorator(boundStoryFunction, context);\n  };\n}\n\n/**\n * Currently StoryContextUpdates are allowed to have any key in the type.\n * However, you cannot overwrite any of the build-it \"static\" keys.\n *\n * @param inputContextUpdate StoryContextUpdate\n * @returns StoryContextUpdate\n */\nexport function sanitizeStoryContextUpdate() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var componentId = _ref.componentId,\n      title = _ref.title,\n      kind = _ref.kind,\n      id = _ref.id,\n      name = _ref.name,\n      story = _ref.story,\n      parameters = _ref.parameters,\n      initialArgs = _ref.initialArgs,\n      argTypes = _ref.argTypes,\n      update = _objectWithoutProperties(_ref, _excluded);\n\n  return update;\n}\nexport function defaultDecorateStory(storyFn, decorators) {\n  // We use a trick to avoid recreating the bound story function inside `decorateStory`.\n  // Instead we pass it a context \"getter\", which is defined once (at \"decoration time\")\n  // The getter reads a variable which is scoped to this call of `decorateStory`\n  // (ie to this story), so there is no possibility of overlap.\n  // This will break if you call the same story twice interleaved\n  // (React might do it if you rendered the same story twice in the one ReactDom.render call, for instance)\n  var contextStore = {};\n  /**\n   * When you call the story function inside a decorator, e.g.:\n   *\n   * ```jsx\n   * <div>{storyFn({ foo: 'bar' })}</div>\n   * ```\n   *\n   * This will override the `foo` property on the `innerContext`, which gets\n   * merged in with the default context\n   */\n\n  var bindWithContext = function bindWithContext(decoratedStoryFn) {\n    return function (update) {\n      contextStore.value = Object.assign({}, contextStore.value, sanitizeStoryContextUpdate(update));\n      return decoratedStoryFn(contextStore.value);\n    };\n  };\n\n  var decoratedWithContextStore = decorators.reduce(function (story, decorator) {\n    return decorateStory(story, decorator, bindWithContext);\n  }, storyFn);\n  return function (context) {\n    contextStore.value = context;\n    return decoratedWithContextStore(context); // Pass the context directly into the first decorator\n  };\n}","import \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { h } from 'vue';\nimport { sanitizeStoryContextUpdate } from '@storybook/store';\n\n/*\n  This normalizes a functional component into a render method in ComponentOptions.\n\n  The concept is taken from Vue 3's `defineComponent` but changed from creating a `setup`\n  method on the ComponentOptions so end-users don't need to specify a \"thunk\" as a decorator.\n */\nfunction normalizeFunctionalComponent(options) {\n  return typeof options === 'function' ? {\n    render: options,\n    name: options.name\n  } : options;\n}\n\nfunction prepare(rawStory, innerStory) {\n  var story = rawStory;\n\n  if (story == null) {\n    return null;\n  }\n\n  if (innerStory) {\n    return Object.assign({}, normalizeFunctionalComponent(story), {\n      components: Object.assign({}, story.components || {}, {\n        story: innerStory\n      })\n    });\n  }\n\n  return {\n    render: function render() {\n      return h(story);\n    }\n  };\n}\n\nexport function decorateStory(storyFn, decorators) {\n  return decorators.reduce(function (decorated, decorator) {\n    return function (context) {\n      var story;\n      var decoratedStory = decorator(function (update) {\n        story = decorated(Object.assign({}, context, sanitizeStoryContextUpdate(update)));\n        return story;\n      }, context);\n\n      if (!story) {\n        story = decorated(context);\n      }\n\n      if (decoratedStory === story) {\n        return story;\n      }\n\n      return prepare(decoratedStory, story);\n    };\n  }, function (context) {\n    return prepare(storyFn(context));\n  });\n}"],"names":["_templateObject","_taggedTemplateLiteral","strings","raw","__name","render","props","context","id","Component","h","activeStoryComponent","shallowRef","root","storybookApp","createApp","renderToDOM","_ref","domElement","title","name","storyFn","showMain","showError","showException","element","dedent","_excluded","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","key","i","sourceSymbolKeys","sourceKeys","decorateStory","decorator","bindWithContext","boundStoryFunction","sanitizeStoryContextUpdate","update","defaultDecorateStory","decorators","contextStore","decoratedStoryFn","decoratedWithContextStore","story","normalizeFunctionalComponent","options","prepare","rawStory","innerStory","decorated","decoratedStory"],"mappings":"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"}