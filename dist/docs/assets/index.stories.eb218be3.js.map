{"version":3,"file":"index.stories.eb218be3.js","sources":["../../../packages/components/InputNumber/index.vue"],"sourcesContent":["<template>\n    <a-input\n        v-bind=\"$attrs\"\n        v-model:value.number=\"computedValue\"\n        :max-length=\"5\"\n        size=\"small\"\n        type=\"number\"\n        :min=\"0\"\n        :max=\"computedMax\"\n    >\n        <template #addonBefore>\n            <a-button @click=\"onMinus\" v-if=\"!$attrs.disabled\" size=\"small\">-</a-button>\n        </template>\n        <template #addonAfter>\n            <a-button @click=\"onAdd\" v-if=\"!$attrs.disabled\" size=\"small\">+</a-button>\n        </template>\n    </a-input>\n</template>\n\n<script lang=\"ts\">\n    import { computed, defineComponent, watch } from 'vue';\n\n    export default defineComponent({\n        name: 'InputNumber2',\n        props: {\n            value: {\n                type: Number,\n                required: true,\n            },\n            max: {\n                type: Number,\n            },\n        },\n        emits: ['update:value', 'change'],\n        setup(props, { emit }) {\n            const computedValue = computed({\n                get: () => (Number.isNaN(+props.value) ? null : +props.value),\n                set: (val) => {\n                    emit('update:value', val);\n                    emit('change', val);\n                },\n            });\n            const computedMax = computed(() => {\n                return props.max;\n            });\n            function onAdd() {\n                if (!computedValue.value) {\n                    computedValue.value = 1;\n                } else {\n                    computedValue.value += 1;\n                }\n            }\n\n            function onMinus() {\n                if (computedValue.value) {\n                    computedValue.value -= 1;\n                }\n            }\n            watch(\n                () => props,\n                (newVal) => {\n                    if (newVal.max && newVal.value > newVal.max) {\n                        emit('update:value', newVal.max);\n                    }\n                },\n                { deep: true },\n            );\n            return {\n                onAdd,\n                onMinus,\n                computedValue,\n                computedMax,\n            };\n        },\n    });\n</script>\n\n<style lang=\"less\" scoped>\n    :deep(.ant-input-wrapper) {\n        .ant-input-group-addon {\n            border: none;\n            background: unset;\n            padding: 0 5px;\n        }\n\n        input[type='number'] {\n            -moz-appearance: textfield;\n            text-align: center;\n        }\n\n        input[type='number']::-webkit-inner-spin-button,\n        input[type='number']::-webkit-outer-spin-button {\n            -webkit-appearance: none;\n            margin: 0;\n        }\n    }\n</style>\n"],"names":["_sfc_main","defineComponent","props","emit","computedValue","computed","val","computedMax","onAdd","__name","onMinus","watch","newVal","_openBlock","_createBlock","_component_a_input","_mergeProps","_ctx","_cache","$event","_withCtx","_component_a_button"],"mappings":"4PAsBI,MAAKA,EAAaC,EAAa,CAC3B,KAAM,eACN,MAAO,CACH,MAAO,CACH,KAAM,OACN,SAAU,EACd,EACA,IAAK,CACD,KAAM,MACV,CACJ,EACA,MAAO,CAAC,eAAgB,QAAQ,EAChC,MAAMC,EAAO,CAAE,KAAAC,GAAQ,CACnB,MAAMC,EAAgBC,EAAS,CAC3B,IAAK,IAAO,OAAO,MAAM,CAACH,EAAM,KAAK,EAAI,KAAO,CAACA,EAAM,MACvD,IAAMI,GAAQ,CACVH,EAAK,eAAgBG,CAAG,EACxBH,EAAK,SAAUG,CAAG,CACtB,CAAA,CACH,EACKC,EAAcF,EAAS,IAClBH,EAAM,GAChB,EACD,SAASM,GAAQ,CACRJ,EAAc,MAGfA,EAAc,OAAS,EAFvBA,EAAc,MAAQ,CAI9B,CANSK,EAAAD,EAAA,SAQT,SAASE,GAAU,CACXN,EAAc,QACdA,EAAc,OAAS,EAE/B,CAJS,OAAAK,EAAAC,EAAA,WAKTC,EACI,IAAMT,EACLU,GAAW,CACJA,EAAO,KAAOA,EAAO,MAAQA,EAAO,KAC/BT,EAAA,eAAgBS,EAAO,GAAG,CAEvC,EACA,CAAE,KAAM,EAAK,CAAA,EAEV,CACH,MAAAJ,EACA,QAAAE,EACA,cAAAN,EACA,YAAAG,CAAA,CAER,CACJ,CAAC,MA5DqE,GAAC,wEAXtD,OAAAM,EAAsB,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAA,CAAA,MAAAA,EAAA,+BAAnCC,EAAoC,KAAAA,EAAA,GAAAC,GAAAF,EAAA,cAAAE,GACnC,eAAa,CAAA,OAAA,EAAA,EACd,aAAY,EACZ,KAAK,QACJ,KAAM,SACN,IAAK,EAAA,IAAAF,EAAA,WAEK,CAAA,EAAA,CAAA,YAC2BG,EAAO,IAAQ,CAAAH,EAAA,OAAA,mBAAAJ,EAAA,EAAAC,EAAAO,EAAA,CAAtC,IAAA,EAAwC,QAAKJ,EAAO,QAAA,KAAA,iDAExD,CAAA,EAAA,WACyBG,EAAO,IAAQ,CAAAH,EAAA,OAAA,mBAAAJ,EAAA,EAAAC,EAAAO,EAAA,CAApC,IAAA,EAAsC,QAAKJ,EAAO,MAAA,KAAA;;;;;;;;;;;;;;;;;;"}